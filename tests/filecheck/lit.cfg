import lit.formats
import os

config.name = "ScaIR"
config.test_source_root = os.path.dirname(__file__)
config.test_format = lit.formats.ShTest(preamble_commands=[f"cd {config.test_source_root}"])
config.suffixes = ['.mlir', '.scala']

scair_opt = os.path.abspath(os.path.join(config.test_source_root, '../../tools/target/universal/stage/bin/scair'))
config.substitutions.append(('scair-opt', f"{scair_opt}"))

full_classpath = open(os.path.abspath('full-classpath')).read()
config.substitutions.append(('full-classpath', f"-classpath {full_classpath}"))